# =============================================================================
# Watchwyrd Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your values
# NEVER commit .env to version control!
# =============================================================================

# -----------------------------------------------------------------------------
# Server Configuration
# -----------------------------------------------------------------------------

# Port to run the addon server on (default: 7000)
PORT=7000

# Host to bind to (default: 0.0.0.0 for all interfaces)
HOST=0.0.0.0

# Node environment (development | production)
NODE_ENV=development

# Base URL for the addon (used for generating manifest URLs)
# In production, set this to your public URL (e.g., https://watchwyrd.example.com)
BASE_URL=http://localhost:7000

# -----------------------------------------------------------------------------
# Security Configuration
# -----------------------------------------------------------------------------

# Secret key for encrypting user config in URLs (AES-256-GCM)
# REQUIRED - The server will not start without this!
# Generate with: node -e "console.log(require('crypto').randomBytes(32).toString('base64url'))"
#
# This key encrypts user API keys in addon URLs. Without it, API keys
# would be visible in plaintext URLs.
SECRET_KEY=

# Salt for PBKDF2 key derivation (additional security layer)
# REQUIRED - The server will not start without this!
# Each deployment should have a unique salt for defense-in-depth
# Generate with: node -e "console.log(require('crypto').randomBytes(16).toString('base64url'))"
# 
# NOTE: Changing this will invalidate all existing encrypted URLs!
ENCRYPTION_SALT=

# Allow legacy unencrypted base64 configs (for migration from older versions)
# Set to "false" after all users have migrated to encrypted URLs
ALLOW_LEGACY_CONFIG=true

# -----------------------------------------------------------------------------
# AI Provider Configuration (for development/testing only)
# -----------------------------------------------------------------------------
# Note: In production, users provide their own API keys via the configure page

# Google Gemini API Key
# Get yours at: https://aistudio.google.com/app/apikey
GEMINI_API_KEY=

# Perplexity API Key
# Get yours at: https://www.perplexity.ai/settings/api
PERPLEXITY_API_KEY=

# OpenAI API Key
# Get yours at: https://platform.openai.com/api-keys
OPENAI_API_KEY=

# RPDB (RatingPosterDB) API Key for enhanced posters with ratings
# Get yours at: https://ratingposterdb.com/
RPDB_API_KEY=

# -----------------------------------------------------------------------------
# Caching Configuration
# -----------------------------------------------------------------------------

# Cache backend: "memory" (default) or "redis"
CACHE_BACKEND=memory

# Redis URL (only required if CACHE_BACKEND=redis)
# Format: redis://[username:password@]host:port[/database]
REDIS_URL=redis://localhost:6379

# Default cache TTL in seconds (default: 21600 = 6 hours)
CACHE_TTL=21600

# Maximum items in memory cache (default: 1000)
CACHE_MAX_SIZE=1000

# -----------------------------------------------------------------------------
# Performance Optimization
# -----------------------------------------------------------------------------

# Enable batch catalog generation (10 catalogs = 1 AI call instead of 10)
# Default: true - significantly reduces API usage
BATCH_GENERATION_ENABLED=true

# -----------------------------------------------------------------------------
# Logging
# -----------------------------------------------------------------------------

# Log level: debug | info | warn | error
LOG_LEVEL=info

# -----------------------------------------------------------------------------
# Rate Limiting (optional, for production)
# -----------------------------------------------------------------------------

# Enable rate limiting (true/false)
RATE_LIMIT_ENABLED=false

# Requests per window
RATE_LIMIT_MAX=100

# Window size in milliseconds (default: 15 minutes)
RATE_LIMIT_WINDOW_MS=900000
